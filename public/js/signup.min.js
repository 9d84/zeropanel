"use strict";var KTSignupGeneral=function(){var t,e,a,n,s;return{init:function(){t=document.querySelector("#kt_sign_up_form"),e=document.querySelector("#kt_sign_up_submit"),n=KTPasswordMeter.getInstance(t.querySelector('[data-kt-password-meter="true"]')),a=FormValidation.formValidation(t,{fields:{name:{validators:{notEmpty:{message:"请输入用户名"}}},email:{validators:{regexp:{regexp:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"The value is not a valid email address"},notEmpty:{message:"请输出邮箱"}}},password:{validators:{notEmpty:{message:"请输入密码"},callback:{message:"请输入有效的密码",callback:function(t){if(t.value.length>0)return s()}}}},"confirm-password":{validators:{notEmpty:{message:"请再次输出密码"},identical:{compare:function(){return t.querySelector('[name="password"]').value},message:"两次密码输入不一致"}}}},plugins:{trigger:new FormValidation.plugins.Trigger({event:{password:!1}}),bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),e.addEventListener("click",function(s){s.preventDefault(),a.validate().then(function(a){"Valid"==a?(e.setAttribute("data-kt-indicator","on"),e.disabled=!0,setTimeout(function(){e.removeAttribute("data-kt-indicator"),e.disabled=!1,$.ajax({method:"POST",url:"/auth/register",dataType:"json",data:{email:$("#email").val(),name:$("#name").val(),passwd:$("#passwd").val(),repasswd:$("#repasswd").val(),code:$("#code").val()},success:function(e){1==e.ret?Swal.fire({text:"You have successfully signup",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn btn-primary"}}).then(function(e){if(e.isConfirmed){t.reset(),n.reset();var a=t.getAttribute("data-kt-redirect-url");a&&(location.href=a)}}):Swal.fire({text:e.msg,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn btn-primary"}})}})},1500)):Swal.fire({text:"抱歉，似乎检测到一些错误，请重试",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn btn-primary"}})})}),t.querySelector('input[name="password"]').addEventListener("input",function(){this.value.length>0&&a.updateFieldStatus("password","NotValidated")})}}}();KTUtil.onDOMContentLoaded(function(){KTSignupGeneral.init()});