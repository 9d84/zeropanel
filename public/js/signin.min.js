"use strict";var KTSigninGeneral=function(){var t,e,n;return{init:function(){t=document.querySelector("#kt_sign_in_form"),e=document.querySelector("#kt_sign_in_submit"),n=FormValidation.formValidation(t,{fields:{email:{validators:{regexp:{regexp:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"请输入正确的邮箱"},notEmpty:{message:"请输入邮箱"}}},password:{validators:{notEmpty:{message:"请输入密码"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),e.addEventListener("click",function(i){i.preventDefault(),n.validate().then(function(n){"Valid"==n?(e.setAttribute("data-kt-indicator","on"),e.disabled=!0,setTimeout(function(){e.removeAttribute("data-kt-indicator"),e.disabled=!1,$.ajax({type:"POST",url:"/auth/login",dataType:"json",data:{email:$("#signin-email").val(),passwd:$("#signin-passwd").val()},success:function(e){1==e.ret?Swal.fire({text:"You have successfully logged in!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn btn-primary"}}).then(function(e){if(e.isConfirmed){t.querySelector('[name="email"]').value="",t.querySelector('[name="password"]').value="";var n=t.getAttribute("data-kt-redirect-url");n&&(location.href=n)}}):Swal.fire({text:e.msg,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}})},2e3)):Swal.fire({text:"抱歉，似乎检测到一些错误，请重试",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn btn-primary"}})})})}}}();KTUtil.onDOMContentLoaded(function(){KTSigninGeneral.init()});